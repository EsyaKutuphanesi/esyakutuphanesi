{% from "security/_macros.html" import render_field_with_errors, render_field %}
{% extends "layout.html" %}
{%block title%}Esya Kutuphanesi{%endblock%}
{% block content %}
    <script>
        function approve(id){
            var url = '{{ url_for('moderation',action="approve") }}'
            window.location = url + '&id=' + id;
        }
    </script>
    <div class="col-md-8 col-md-offset-2 col-sm-12">
        <h1>Bekleyen Onaylar</h1>
        <table class="table table-bordered">
        <tr>
            <th>Group</th>
            <th>User</th>
            <th>Stuff</th>
            <th>Detail</th>
            <th>Action</th>
        </tr>
            {% for stuff in last_objects %}
                <tr>
                    {% if stuff.group_id > 0 %}
                        <td>{{ stuff.group.name }}</td>
                    {% elif stuff.group_id == -1 %}
                        <td>Herkese Açık</td>
                    {% else %}
                        <td>Geçersiz</td>
                    {% endif %}
                    <td>{{ stuff.owner.name }}</td>
                    <td>{{ stuff }}</td>
                    <td>{{ stuff.about }}</td>
                    <td>
                        <button class="btn" onclick="approve({{ stuff.id }})">Onayla</button>
                        <button class="btn">Reddet</button>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>

{% endblock %}

