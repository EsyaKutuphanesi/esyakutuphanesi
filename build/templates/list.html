{% extends "layout.html" %}
{% block content %}
<script>
 function sendFilter() {
 	 var _filter = '';
     $('#listing :checked').each(function() {
     	if(_filter > '')
     		_filter += ','
     	_filter += $(this).val();
     });
     if(_filter>'')     
		window.location = '{{url_for('search', context=context)}}?filter='+_filter
	 else
	 	window.location = '{{url_for('search', context=context)}}'
  }
</script>
<div class="row">
	<div class="col-lg-3"></div>
	<div class="col-lg-6">
	{% if search_key %}
		<p><h2>Search results for {{ search_key }} in {{ context }} List</h2>
		    <ul>
		    {% if context == 'category' %}
		        {% for category in result %}
		        	{% for thing in category.things%}
		        		{% for item in thing.objects%}
		            		<li><a href='/{{ item.url }}'>{{ item }}</a></li>
		            	{% endfor %}
		            {% endfor %}
		        {% endfor %}
		     {% elif context == 'thing' %}
		     	{% for thing in result %}
		        	{% for item in thing.objects%}
		            	<li><a href='/{{ item.url }}'>{{ item }}</a></li>
		            {% endfor %}
		        {% endfor %}
		      {% elif context == 'user' %}
		        {% for user in result %}
		        		{% for item in user.objects%}
		            		<li><a href='/{{ item.url }}'>{{ item }}</a></li>
		            	{% endfor %}
		        {% endfor %}
		       {% else %}
		       	<li>No Result</li>
		       	{% endif %}
		    </ul>
		</p>
	{% else%}
		<p><h2>{{ context }} List</h2>
		    <div id="listing" class="row">
		        {% for item in result %}
		            <div class="col-lg-3">
		            	<input type="checkbox" name="{{context[:3]}}{{item.id}}" value="{{item.id}}">
		            		<a href='/{{ item.url }}'>{{ item }}</a>
		            	</input>
		            </div>
		        {% endfor %}
		    </div>
		    <div class="row">
		    	<div class="col-lg-3"><button name="Submit" onclick="sendFilter()">Submit</button></div>
		    </div>
		</p>
	{%endif%}
	</div>
	<div class="col-lg-3"></div>
</div>	
{% endblock %}

